<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="{lang:}">
  <head>
    <title>RSpec.info: Mock Object behaviour on Real Objects</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="description" content="RSpec, {title: }, BDD, behaviour driven development, behavior driven development, TDD, test driven development, Ruby, Rails, testing, watir, selenium"/>

    <!-- CodeRay syntax highlighting CSS -->
    <link rel="stylesheet" href="/rspec-1-3-2-info/css/coderay.css" type="text/css" />

    <!-- Homepage CSS -->
    <link rel="stylesheet" href="/rspec-1-3-2-info/css/breadcrumbs.css" type="text/css" media="screen, projection" />
    <link rel="stylesheet" href="/rspec-1-3-2-info/css/default.css" type="text/css" media="screen, projection" />

    <style><!--
    div.breadcrumbs ul li {
    	background-image: url(/images/arrow.gif);
    }
    --></style>
  </head>
<body>

<div id="container">
  <div id="header">
    <h1><a href="/rspec-1-3-2info/">rspec-1.3.2 | rspec-rails-1.3.4</a></h1>
  </div>

  <div class="breadcrumb-menu">      <div class="breadcrumbs">
        <ul>
        
          
            <li><a href="/rspec-1-3-2-info/">Home</a></li>
          
        
          
            <li><a href="/rspec-1-3-2-info/documentation/">RSpec</a></li>
          
        
          
            <li><a href="/rspec-1-3-2-info/documentation/mocks/">Mocks and Stubs</a></li>
          
        
          
            <li class="current"><a href="/rspec-1-3-2-info/documentation/mocks/partial_mocks.html">Mock Object behaviour on Real Objects</a></li>
          
        
        </ul>
      </div>
      <div class="menu">
        <ul>
        
        
        
                </ul>
      </div>
</div>

  <div id="content">
    <h2>Mock Object behaviour on Real Objects</h2>
<p>RSpec allows you to add mock object behaviour to real objects, so you can set <a href="message_expectations.html">message expectations</a> and <a href="stubs.html">method stubs</a> on any object in your system.</p>
<p>One common use of this support is isolating examples from ActiveRecord (and therefore the database) in Ruby on Rails examples.</p>
<div class="CodeRay">
<pre><span class="co">MyModel</span>.should_receive(<span class="sy">:find</span>).with(id).and_return(<span class="iv">@mock_model_instance</span>)
</pre>
</div>
<p>Controlling the behaviour of the class level methods (for example, having them return a mock object instead of a real instance of the model class) allows you to describe your controllers and views in isolation from the instance level logic of your model classes. This means that you can change the validation rules for a model, for example, and drive that in the model examples without affecting the controller and view examples.</p>
<p>This also helps to keep the context of your example completely in view (no having to look at fixtures/xyz.yml to understand what&#8217;s going on).</p>
    
    <div id="footer">
      Webdesign by <a href="http://www.oswd.org/user/profile/id/9462">JM</a>
      <SCRIPT type='text/javascript' language='JavaScript' src='https://www.ohloh.net/projects/4386;badge_js'></SCRIPT>
    </div>
  </div>
</div>

<script src="https://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-1889510-1";
urchinTracker();
</script>
</body>
</html>
